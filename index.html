<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transaction Data</title>
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            padding: 8px;
            border: 1px solid #ddd;
        }
    </style>
</head>
<body>
    <h1>Transaction Data</h1>

    <!-- Form to submit new data -->
    <form id="transaction-form">
        <label>Client Name:</label>
        <input type="text" id="client-name"><br>

        <label>Date of Transaction:</label>
        <input type="date" id="transaction-date"><br>

        <label>Volume (MWh):</label>
        <input type="number" id="volume"><br>

        <label>Vintage (year):</label>
        <input type="number" id="vintage"><br>

        <label>Technology:</label>
        <select id="technology">
            <option value="Wind">Wind</option>
            <option value="Solar">Solar</option>
            <option value="Hydro">Hydro</option>
            <option value="Other">Other</option>
        </select><br>

        <label>Country:</label>
        <select id="country">
            <option value="Any">Any</option>
            <!-- Add your country options here -->
        </select><br>

        <label>Price (EUR/MWh):</label>
        <input type="number" step="0.01" id="price"><br>

        <label>Comments:</label>
        <textarea id="comments"></textarea><br>

        <button type="submit">Submit</button>
    </form>

    <h2>Transaction Data</h2>
    <table id="data-table">
        <thead>
            <tr>
                <th>Client Name</th>
                <th>Date</th>
                <th>Volume (MWh)</th>
                <th>Vintage</th>
                <th>Technology</th>
                <th>Country</th>
                <th>Price (EUR/MWh)</th>
                <th>Comments</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Fetch existing data from backend
            fetch('/api/data')
                .then(response => response.json())
                .then(data => {
                    const table = document.getElementById('data-table').getElementsByTagName('tbody')[0];
                    data.forEach(row => {
                        const tr = document.createElement('tr');
                        row.forEach(cell => {
                            const td = document.createElement('td');
                            td.textContent = cell;
                            tr.appendChild(td);
                        });
                        table.appendChild(tr);
                    });
                });

            // Handle form submission
            document.getElementById('transaction-form').addEventListener('submit', (event) => {
                event.preventDefault();
                
                // Gather form data
                const formData = {
                    clientName: document.getElementById('client-name').value,
                    transactionDate: document.getElementById('transaction-date').value,
                    volume: document.getElementById('volume').value,
                    vintage: document.getElementById('vintage').value,
                    technology: document.getElementById('technology').value,
                    country: document.getElementById('country').value,
                    price: document.getElementById('price').value,
                    comments: document.getElementById('comments').value,
                };

                // Send data to the backend (optional if backend has insert logic)
                fetch('/api/submit', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData),
                })
                .then(response => response.json())
                .then(data => console.log(data));

                // Optionally, add new data to the table (or trigger a refresh)
            });
        });
    </script>
</body>
</html>
